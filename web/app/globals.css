@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-first CSS Custom Properties */
:root {
  --mobile-header-height: 60px;
  --mobile-bottom-nav-height: 80px;
  --mobile-padding: 16px;
  --mobile-gap: 12px;

  /* Touch-friendly sizing */
  --touch-target-min: 44px;
  --touch-padding: 12px;
}

/* Base mobile-first styles */
@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    /* Prevent zoom on iOS Safari */
    -webkit-text-size-adjust: 100%;
    /* Smooth scrolling */
    scroll-behavior: smooth;
    /* Improve font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    /* Prevent overscroll on mobile */
    overscroll-behavior: none;
    /* Remove default margin/padding */
    margin: 0;
    padding: 0;
    /* Optimize for mobile performance */
    -webkit-overflow-scrolling: touch;
  }

  /* Mobile-optimized focus states */
  button:focus,
  input:focus,
  textarea:focus,
  select:focus {
    outline: 2px solid theme('colors.primary.500');
    outline-offset: 2px;
  }

  /* Improve tap highlights on mobile */
  button,
  a,
  input[type="submit"],
  input[type="button"] {
    -webkit-tap-highlight-color: transparent;
  }
}

/* Mobile-first component styles */
@layer components {
  /* Mobile-optimized buttons */
  .btn-mobile {
    @apply min-h-[44px] px-4 py-3 rounded-lg font-medium text-sm;
    @apply active:scale-95 transition-transform duration-150;
  }

  .btn-primary-mobile {
    @apply btn-mobile bg-primary-600 text-white;
    @apply hover:bg-primary-700 active:bg-primary-800;
  }

  .btn-secondary-mobile {
    @apply btn-mobile bg-gray-100 text-gray-900 border border-gray-300;
    @apply hover:bg-gray-200 active:bg-gray-300;
  }

  /* Mobile-friendly form inputs */
  .input-mobile {
    @apply w-full px-4 py-3 rounded-lg border border-gray-300;
    @apply text-base bg-white focus:border-primary-500 focus:ring-1 focus:ring-primary-500;
    @apply placeholder-gray-500;
    /* Prevent zoom on iOS */
    font-size: 16px;
  }

  /* Mobile-optimized cards */
  .card-mobile {
    @apply bg-white rounded-lg border border-gray-200 p-4;
    @apply shadow-mobile hover:shadow-mobile-lg transition-shadow;
  }

  /* Mobile navigation */
  .nav-mobile {
    @apply fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200;
    @apply flex items-center justify-around;
    height: var(--mobile-bottom-nav-height);
    @apply safe-area-pb;
  }

  .nav-item-mobile {
    @apply flex flex-col items-center justify-center p-2;
    @apply text-xs text-gray-600 active:text-primary-600;
    min-width: var(--touch-target-min);
    min-height: var(--touch-target-min);
  }

  /* Mobile header */
  .header-mobile {
    @apply fixed top-0 left-0 right-0 bg-white border-b border-gray-200;
    @apply flex items-center justify-between px-4;
    @apply z-50;
    height: var(--mobile-header-height);
    @apply safe-area-pt;
  }

  /* Safe area utilities for iPhone notch */
  .safe-area-pt {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-pb {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-pl {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-pr {
    padding-right: env(safe-area-inset-right);
  }

  /* Mobile-optimized layouts */
  .mobile-container {
    @apply px-4 py-6 max-w-lg mx-auto;
  }

  .mobile-grid {
    @apply grid grid-cols-1 gap-4;
  }

  /* Trading-specific mobile components */
  .signal-card-mobile {
    @apply card-mobile space-y-3;
  }

  .signal-header-mobile {
    @apply flex items-center justify-between;
  }

  .signal-price-mobile {
    @apply text-lg font-bold;
  }

  .signal-meta-mobile {
    @apply text-sm text-gray-600 flex items-center gap-2;
  }

  /* Mobile-friendly price displays */
  .price-up {
    @apply text-success-600 bg-success-50 px-2 py-1 rounded;
  }

  .price-down {
    @apply text-danger-600 bg-danger-50 px-2 py-1 rounded;
  }

  /* Mobile loading states */
  .skeleton-mobile {
    @apply animate-pulse bg-gray-200 rounded;
  }

  /* Mobile alerts */
  .alert-mobile {
    @apply p-4 rounded-lg border-l-4;
  }

  .alert-success-mobile {
    @apply alert-mobile bg-success-50 border-success-400 text-success-800;
  }

  .alert-danger-mobile {
    @apply alert-mobile bg-danger-50 border-danger-400 text-danger-800;
  }

  .alert-info-mobile {
    @apply alert-mobile bg-primary-50 border-primary-400 text-primary-800;
  }
}

/* Mobile-specific utilities */
@layer utilities {
  /* Hide scrollbars on mobile but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Touch-friendly sizing */
  .touch-target {
    min-width: var(--touch-target-min);
    min-height: var(--touch-target-min);
  }

  /* Mobile-optimized text truncation */
  .text-truncate-mobile {
    @apply truncate max-w-[200px];
  }

  /* Mobile gap utilities */
  .gap-mobile {
    gap: var(--mobile-gap);
  }

  /* Mobile padding utilities */
  .p-mobile {
    padding: var(--mobile-padding);
  }

  /* Aspect ratios for mobile content */
  .aspect-mobile-card {
    aspect-ratio: 16 / 9;
  }

  .aspect-mobile-square {
    aspect-ratio: 1 / 1;
  }
}

/* Dark theme overrides for mobile */
@media (prefers-color-scheme: dark) {
  .card-mobile {
    @apply bg-dark-800 border-dark-700;
  }

  .input-mobile {
    @apply bg-dark-800 border-dark-700 text-white;
  }

  .nav-mobile {
    @apply bg-dark-800 border-dark-700;
  }

  .header-mobile {
    @apply bg-dark-800 border-dark-700;
  }
}

/* PWA-specific styles */
@media (display-mode: standalone) {
  /* Hide elements when running as PWA */
  .pwa-hide {
    display: none;
  }

  /* Adjust for PWA status bar */
  .header-mobile {
    padding-top: calc(var(--mobile-padding) + env(safe-area-inset-top));
  }
}

/* Performance optimizations for mobile */
@media (hover: none) and (pointer: coarse) {
  /* Disable hover effects on touch devices */
  .hover\\:shadow-mobile-lg:hover {
    box-shadow: none;
  }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}