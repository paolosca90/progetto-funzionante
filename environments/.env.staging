# AI Cash Revolution - Staging Environment Configuration
# Configuration for pre-production testing and validation

# ==========================================
# SERVER CONFIGURATION
# ==========================================
NODE_ENV=staging
PORT=3000
LOG_LEVEL=debug

# Domain and CORS
DOMAIN=staging.aicash-revolution.com
CORS_ORIGIN=https://staging.aicash-revolution.com,http://localhost:3000
TRUST_PROXY=true

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================
JWT_SECRET=staging_jwt_secret_change_me_for_production
JWT_EXPIRY=24h
JWT_REFRESH_SECRET=staging_refresh_secret_change_me_for_production
JWT_REFRESH_EXPIRY=7d

# Session configuration
SESSION_SECRET=staging_session_secret_change_me_for_production
COOKIE_SECURE=true
COOKIE_SAME_SITE=lax

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# PostgreSQL Staging Database
DATABASE_URL=postgresql://staging_user:staging_password@staging-db:5432/aicash_staging

# Connection pool settings (smaller for staging)
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=10000

# ==========================================
# REDIS CONFIGURATION
# ==========================================
REDIS_URL=redis://staging-redis:6379
REDIS_HOST=staging-redis
REDIS_PORT=6379
REDIS_PASSWORD=staging_redis_password

# Redis connection pool
REDIS_POOL_MIN=1
REDIS_POOL_MAX=5

# ==========================================
# TRADING API INTEGRATIONS (Demo/Test Accounts)
# ==========================================

# Oanda API (Demo Trading)
OANDA_API_KEY=your_oanda_demo_api_key
OANDA_ACCOUNT_ID=your_oanda_demo_account_id
OANDA_BASE_URL=https://api-fxpractice.oanda.com
OANDA_RATE_LIMIT_PER_MINUTE=60

# CME Group APIs (Demo/Test)
CMEGROUP_API_KEY=your_cme_demo_api_key
CMEGROUP_BASE_URL=https://www.cmegroup.com
CME_RATE_LIMIT_PER_HOUR=1000

# Sierra Chart Integration (Test Environment)
SIERRA_CHART_HOST=staging-sierra
SIERRA_CHART_PORT=4444
SIERRA_CHART_USERNAME=demo_user
SIERRA_CHART_PASSWORD=demo_password

# MT5 Bridge (Demo Account)
MT5_HOST=staging-mt5
MT5_PORT=9999
MT5_USERNAME=demo_account
MT5_PASSWORD=demo_password
MT5_SERVER=demo_server

# ==========================================
# GOOGLE OAUTH CONFIGURATION
# ==========================================
GOOGLE_CLIENT_ID=your_staging_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_staging_google_client_secret

# ==========================================
# AI/ML SERVICES
# ==========================================
# Gemini AI (with lower rate limits for staging)
GEMINI_API_KEY=your_staging_gemini_api_key
GEMINI_RATE_LIMIT_PER_MINUTE=30

# OpenAI (Alternative AI provider)
OPENAI_API_KEY=your_staging_openai_api_key

# ==========================================
# EMAIL CONFIGURATION
# ==========================================
EMAIL_FROM=staging@aicash-revolution.com
EMAIL_HOST=smtp.mailtrap.io
EMAIL_PORT=2525
EMAIL_SECURE=false
EMAIL_USER=your_mailtrap_user
EMAIL_PASS=your_mailtrap_password

# ==========================================
# PAYMENT PROCESSING
# ==========================================
# Stripe (Test Mode)
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_test_publishable_key
STRIPE_SECRET_KEY=sk_test_your_stripe_test_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_test_webhook_secret

# ==========================================
# MONITORING & ANALYTICS
# ==========================================
# Sentry (Staging Project)
SENTRY_DSN=https://your_staging_sentry_dsn@sentry.io/staging_project_id

# Segment (Test Analytics)
ANALYTICS_KEY=your_staging_segment_write_key

# New Relic (Staging Environment)
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
NEW_RELIC_APP_NAME=AI Cash Revolution Staging

# ==========================================
# RATE LIMITING (More relaxed for testing)
# ==========================================
RATE_LIMIT_WINDOW_MS=600000
RATE_LIMIT_MAX_REQUESTS=200
RATE_LIMIT_ENABLE=true

# API specific rate limits
AUTH_RATE_LIMIT=20
SIGNALS_RATE_LIMIT=120
TRADING_RATE_LIMIT=200

# ==========================================
# ML/AI OPTIMIZATION
# ==========================================
ENABLE_CONTINUOUS_ML=true
ML_OPTIMIZATION_INTERVAL=10
ML_BATCH_SIZE=500
ML_LEARNING_RATE=0.01

# ==========================================
# FILE STORAGE
# ==========================================
# Local storage for staging
STORAGE_TYPE=local
LOCAL_STORAGE_PATH=/app/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif

# AWS S3 (optional for staging)
AWS_ACCESS_KEY_ID=your_staging_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_staging_aws_secret_access_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=aicash-revolution-staging
CDN_BASE_URL=https://staging-cdn.aicash-revolution.com
CDN_ENABLED=false

# ==========================================
# HEALTH & MONITORING
# ==========================================
HEALTH_CHECK_TIMEOUT=15000
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_ENABLED=true

# ==========================================
# NOTIFICATION SERVICES
# ==========================================
# Disabled or test configurations for staging
TWILIO_ACCOUNT_SID=test_twilio_sid
TWILIO_AUTH_TOKEN=test_twilio_token
TWILIO_PHONE_NUMBER=+1234567890

# Slack (Staging Channel)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/staging/webhook

# Discord (Test Notifications)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your/test/webhook

# ==========================================
# BACKUP CONFIGURATION
# ==========================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 4 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=aicash-revolution-staging-backups

# ==========================================
# FEATURE FLAGS (Enable all for testing)
# ==========================================
ENABLE_REGISTRATION=true
ENABLE_PREMIUM_FEATURES=true
ENABLE_SOCIAL_LOGIN=true
ENABLE_MOBILE_PUSH=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=true
ENABLE_WEBHOOK_NOTIFICATIONS=true

# ==========================================
# SECURITY SETTINGS (Relaxed for testing)
# ==========================================
BCRYPT_ROUNDS=10
PASSWORD_MIN_LENGTH=6
REQUIRE_EMAIL_VERIFICATION=false
REQUIRE_PHONE_VERIFICATION=false
MAX_LOGIN_ATTEMPTS=10
LOCKOUT_DURATION=300000

# API Security
API_KEY_REQUIRED=false
API_VERSION=v1
ENABLE_API_DOCS=true

# ==========================================
# TRADING SYSTEM SETTINGS
# ==========================================
# Risk management (more permissive for testing)
MAX_POSITION_SIZE_PERCENT=10
DEFAULT_STOP_LOSS_PERCENT=5
DEFAULT_TAKE_PROFIT_PERCENT=10
MAX_DAILY_TRADES=50
ENABLE_RISK_MANAGEMENT=true

# Signal generation
SIGNAL_CONFIDENCE_THRESHOLD=0.5
MAX_CONCURRENT_SIGNALS=10
SIGNAL_EXPIRY_MINUTES=120

# ==========================================
# PERFORMANCE SETTINGS
# ==========================================
CLUSTER_MODE=false
CLUSTER_WORKERS=1
COMPRESSION_ENABLED=true
CACHE_TTL=1800
ENABLE_SWAGGER=true

# ==========================================
# DEVELOPMENT/DEBUG (Enabled for staging)
# ==========================================
DEBUG=true
VERBOSE_LOGGING=true
ENABLE_CORS_DEBUG=true
PRETTY_PRINT_LOGS=true

# Test data seeding
ENABLE_TEST_DATA=true
RESET_DB_ON_START=false
SEED_TEST_USERS=true